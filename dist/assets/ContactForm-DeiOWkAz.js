import{r as m,j as e,s as j,t as v,u as N,v as w,w as E}from"./index-DFcaoqIO.js";const S="7998594844:AAGtQXBF6lYtKdk7oazPnQ5T6m4-orovVss",x="-4736008830",h=`https://api.telegram.org/bot${S}/sendMessage`,T=async s=>{const o=`
🆕 Nuevo mensaje de contacto:
👤 Nombre: ${s.name}
📧 Email: ${s.email}
📱 Teléfono: ${s.phone}
🏢 Empresa: ${s.company}
💬 Mensaje: ${s.message}
  `.trim();try{console.log("Enviando mensaje a Telegram..."),console.log("URL:",h),console.log("Chat ID:",x);const t=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:x,text:o,parse_mode:"HTML"})}),l=await t.json();if(console.log("Respuesta de Telegram:",l),!t.ok)throw new Error(`Error al enviar mensaje a Telegram: ${l.description||"Error desconocido"}`)}catch(t){throw console.error("Error detallado en sendTelegramMessage:",t),new Error(`Error al enviar mensaje a Telegram: ${t instanceof Error?t.message:"Error desconocido"}`)}},C=async s=>{try{await T({name:s.name,email:s.email,phone:s.phone,company:s.company,message:s.message}),console.log("Formulario enviado exitosamente")}catch(o){throw console.error("Error al enviar el formulario:",o),o}},k=s=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s),F=s=>/^\+?[\d\s-]{10,}$/.test(s),$=()=>{const s=new Uint32Array(8);return window.crypto.getRandomValues(s),Array.from(s,o=>("0"+o.toString(16)).substr(-2)).join("")},L=()=>{const s=Date.now(),o=localStorage.getItem("lastFormSubmission");return o&&s-parseInt(o)<3e4?!1:(localStorage.setItem("lastFormSubmission",s.toString()),!0)},R=()=>{if(typeof window>"u")return!0;const s=navigator.userAgent.toLowerCase();return["bot","crawler","spider","slurp","postman"].some(t=>s.includes(t))},M=()=>{const[s,o]=m.useState({name:"",email:"",phone:"",company:"",message:"",csrfToken:""}),[t,l]=m.useState(!1),[u,i]=m.useState(null),[n,g]=m.useState({});m.useEffect(()=>{const r=$();localStorage.setItem("csrfToken",r),o(a=>({...a,csrfToken:r}))},[]);const c=r=>{const{name:a,value:y}=r.target;o(d=>({...d,[a]:y})),n[a]&&g(d=>{const p={...d};return delete p[a],p})},f=()=>{const r={};return s.name.trim()?s.name.length<2&&(r.name="El nombre debe tener al menos 2 caracteres"):r.name="El nombre es requerido",s.email.trim()?k(s.email)||(r.email="Por favor ingresa un email válido"):r.email="El email es requerido",s.phone.trim()?F(s.phone)||(r.phone="Por favor ingresa un teléfono válido"):r.phone="El teléfono es requerido",s.company.trim()||(r.company="La empresa es requerida"),s.message.trim()?s.message.length<10&&(r.message="El mensaje debe tener al menos 10 caracteres"):r.message="El mensaje es requerido",g(r),Object.keys(r).length===0},b=async r=>{if(r.preventDefault(),R()){i("error");return}if(!L()){i("error");return}if(f()){l(!0),i(null);try{const a=localStorage.getItem("csrfToken");if(!a)throw new Error("Token de seguridad no encontrado");await C({name:s.name,email:s.email,phone:s.phone,company:s.company,message:s.message,csrfToken:a}),i("success"),o({name:"",email:"",phone:"",company:"",message:"",csrfToken:a})}catch(a){console.error("Error submitting form:",a),i("error")}finally{l(!1)}}};return e.jsx("section",{id:"contacto",className:"py-20 bg-gradient-to-b from-gray-50 to-white",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-4xl font-tektur font-bold mb-4 text-gray-800",children:"Contáctanos"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"¿Listo para transformar tu negocio? Déjanos tus datos y nos pondremos en contacto contigo."})]}),e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(j,{className:"text-gray-400"})}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:c,placeholder:"Nombre completo",required:!0,minLength:2,className:`w-full pl-10 pr-4 py-3 border ${n.name?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`}),n.name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.name})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(v,{className:"text-gray-400"})}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:c,placeholder:"Correo electrónico",required:!0,className:`w-full pl-10 pr-4 py-3 border ${n.email?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`}),n.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.email})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(N,{className:"text-gray-400"})}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:c,placeholder:"Teléfono",required:!0,className:`w-full pl-10 pr-4 py-3 border ${n.phone?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`}),n.phone&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.phone})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(w,{className:"text-gray-400"})}),e.jsx("input",{type:"text",name:"company",value:s.company,onChange:c,placeholder:"Empresa",required:!0,className:`w-full pl-10 pr-4 py-3 border ${n.company?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`}),n.company&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.company})]})]}),e.jsxs("div",{children:[e.jsx("textarea",{name:"message",value:s.message,onChange:c,placeholder:"Cuéntanos sobre tu proyecto",required:!0,minLength:10,rows:4,className:`w-full px-4 py-3 border ${n.message?"border-red-500":"border-gray-300"} rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors`}),n.message&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:n.message})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("button",{type:"submit",disabled:t,className:`inline-flex items-center justify-center px-8 py-3 rounded-lg text-white font-medium transition-colors ${t?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2"}),"Enviar Mensaje"]})}),e.jsx("p",{className:"mt-4 text-sm text-gray-500",children:"* Nos pondremos en contacto contigo en un máximo de 10 minutos"})]}),u==="success"&&e.jsx("div",{className:"text-center text-green-600 bg-green-100 py-3 px-4 rounded-lg",children:"¡Mensaje enviado con éxito! Nos pondremos en contacto contigo pronto."}),u==="error"&&e.jsx("div",{className:"text-center text-red-600 bg-red-100 py-3 px-4 rounded-lg",children:"Hubo un error al enviar el mensaje. Por favor, intenta nuevamente."})]})})]})})};export{M as default};
